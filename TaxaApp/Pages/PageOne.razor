@page "/"

@inject IJSRuntime JSRuntime
@inject NavigationManager NavigationManager

<div>
    <iframe width="600" height="450"
     style="border:0" loading="lazy" 
     allowfullscreen
     src="https://www.google.com/maps/embed/v1/view?zoom=11&center=55.6761%2C12.5683&key=AIzaSyArd3NK5stVf6nSeBSEcrsH-9FKCRuT_U0">
    </iframe>
</div>

<div>
    <input @bind="startAddress" placeholder="Start address" />
    <input @bind="endAddress" placeholder="End address" />

    <button @onclick="CalculateRoute">Get Directions</button>



</div>

@code {
    //API KEY                   AIzaSyArd3NK5stVf6nSeBSEcrsH-9FKCRuT_U0
    private string startAddress = "";
    private string endAddress = "";

    private async Task CalculateRoute()
    {
        // Implementation here...
    }


    private async Task SearchAddresses(string query)
    {
        if (string.IsNullOrEmpty(query)) return;

        // Replace with your Google Maps API key
        const string apiKey = "AIzaSyArd3NK5stVf6nSeBSEcrsH-9FKCRuT_U0";

        string url = $"https://maps.googleapis.com/maps/api/place/autocomplete/json?input={query}&key=AIzaSyArd3NK5stVf6nSeBSEcrsH - 9FKCRuT_U0";
        try
        {
            using (var httpClient = new HttpClient())
            {
                var response = await httpClient.GetStringAsync(url);
                dynamic results = System.Text.Json.JsonSerializer.Deserialize<dynamic>(response);

                // Pass suggestions to JavaScript using JSRuntime
                await JSRuntime.InvokeAsync<object>("displayAddressSuggestions", results);
            }
        }
        catch (Exception ex)
        {
            // Handle errors gracefully
        }
    }
}